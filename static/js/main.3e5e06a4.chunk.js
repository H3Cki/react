(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{67:function(e,n,t){},76:function(e,n,t){"use strict";t.r(n);var r,a,c,i,s,o,d,l,j,b,u,p,x,f=t(0),h=t.n(f),O=t(27),g=t.n(O),v=(t(67),t(6)),m=t(33),y=function(){return Object(m.b)()},S=m.c,w=t(78),k=t(80),z=t(59),C=t(7),N=t(43),E=t(29),M=t(41),W=t.n(M),D=t(45),R=t(34),A=Object(R.b)("users/fetchSeats",Object(D.a)(W.a.mark((function e(){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3001/seats");case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))),B=Object(R.c)({name:"reservation",initialState:{currStep:0,seats:[],adjacent:!1,nSelectedSeats:0,maxEmptySeats:0,selectedSeats:[]},reducers:{setSuggestedSeats:function(e){if(B.caseReducers.deselectAllSeats(e),e.nSelectedSeats>e.maxEmptySeats)alert("Wybrano ".concat(e.nSelectedSeats," miejsc, na tej sali wolnych miejsc jest ").concat(e.maxEmptySeats,"."));else{var n,t=[],r=null,a=Object(E.a)(e.seats);try{for(a.s();!(n=a.n()).done;){var c=n.value;if(r&&e.adjacent&&(r.cords.y!==c.cords.y-1||r.cords.x!==c.cords.x||c.reserved)&&(t=[]),c.reserved||t.push(c.id),r=c,t.length===e.nSelectedSeats)return void B.caseReducers.toggleSeats(e,{type:"suggested/toggle",payload:t})}}catch(i){a.e(i)}finally{a.f()}alert("Nie uda\u0142o si\u0119 wybra\u0107 ".concat(e.nSelectedSeats," ").concat(e.adjacent?"s\u0105siaduj\u0105cych ":"","miejsc."))}},nextStep:function(e){e.currStep+=1,I()},prevStep:function(e){e.currStep-=1},setNumberOfSeats:function(e,n){e.nSelectedSeats=n.payload},toggleAdjacent:function(e,n){n.payload?e.adjacent=n.payload:e.adjacent=!e.adjacent},deselectAllSeats:function(e){var n,t=Object(E.a)(e.selectedSeats);try{for(t.s();!(n=t.n()).done;){n.value.selected=!1}}catch(r){t.e(r)}finally{t.f()}e.selectedSeats=[]},toggleSeats:function(e,n){var t,r=n.payload,a=e.seats.filter((function(e){return r.includes(e.id)})),c=Object(E.a)(a);try{var i=function(){var n=t.value;if(n.reserved)return alert("Miejsce jest ju\u017c zarezerwowane."),{v:void 0};if(n.selected)e.selectedSeats=e.selectedSeats.filter((function(e){return e.id!==n.id})),n.selected=!1;else{if(e.selectedSeats.length>=e.nSelectedSeats)return alert("Limit miejsc osi\u0105gni\u0119ty."),{v:void 0};e.selectedSeats.push(n),n.selected=!0}};for(c.s();!(t=c.n()).done;){var s=i();if("object"===typeof s)return s.v}}catch(o){c.e(o)}finally{c.f()}}},extraReducers:function(e){e.addCase(A.pending,(function(){})),e.addCase(A.fulfilled,(function(e,n){e.maxEmptySeats=0,e.seats=n.payload.map((function(n){return n.reserved||(e.maxEmptySeats+=1),Object(N.a)(Object(N.a)({},n),{},{selected:!1})})),B.caseReducers.nextStep(e)})),e.addCase(A.rejected,(function(e,n){alert("B\u0142\u0105d Po\u0142\u0105czenia z serwerem.")}))}}),L=B.actions,H=L.toggleAdjacent,J=L.toggleSeats,P=L.setNumberOfSeats,Z=L.nextStep,I=L.prevStep,K=L.setSuggestedSeats,T=function(e){return e.reservation.nSelectedSeats},U=function(e){return e.reservation.adjacent},q=function(e){return e.reservation.seats},F=function(e){return e.reservation.selectedSeats},G=function(e){return e.reservation.currStep},Q=function(e){return e.reservation.nSelectedSeats<=e.reservation.maxEmptySeats?e.reservation.nSelectedSeats:e.reservation.maxEmptySeats},V=function(e){return e.reservation.selectedSeats.length===Q(e)},X=B.reducer,Y=t(2),$=C.b.div(r||(r=Object(v.a)(["\n  position: relative;\n  width: 100vh;\n  height: 100vh;\n"]))),_=C.b.div(a||(a=Object(v.a)(["\n  position: fixed;\n  top: 50%;\n  right: 50%;\n  transform: translate(50%, -50%);\n  border-radius: 5px;\n  background: white;\n  padding: 20px;\n  width: 300px;\n\n  .field:not(:first-child) {\n    margin-top: 20px;\n  }\n\n  box-shadow: 0px 0px 8px 1px rgba(0, 0, 0, 0.2);\n"]))),ee=C.b.div(c||(c=Object(v.a)(["\n  display: flex;\n"]))),ne=C.b.div(i||(i=Object(v.a)(["\n  width: 50%;\n"]))),te=Object(C.b)(w.a)(s||(s=Object(v.a)(["\n  text-align: right;\n"]))),re=function(){var e=S(T),n=S(U),t=y();return console.log(n),Object(Y.jsx)($,{children:Object(Y.jsxs)(_,{children:[Object(Y.jsx)("div",{className:"field",children:Object(Y.jsxs)(ee,{children:[Object(Y.jsx)(ne,{children:Object(Y.jsx)("span",{children:"Liczba miejsc:"})}),Object(Y.jsx)(ne,{children:Object(Y.jsx)(te,{value:e>0?e:"",onChange:function(e){return function(e){var n=Number(e.target.value);isNaN(n)?alert("BAD"):t(P(n))}(e)}})})]})}),Object(Y.jsx)("div",{className:"field",children:Object(Y.jsx)(k.a,{checked:n,onChange:function(e){return t(H(e.target.checked))},children:"Czy miejsca maj\u0105 by\u0107 obok siebie?"})}),Object(Y.jsx)("div",{className:"field",children:Object(Y.jsxs)(ee,{children:[Object(Y.jsx)(ne,{}),Object(Y.jsx)(ne,{children:Object(Y.jsx)(z.a,{type:"primary",onClick:function(n){e<1?alert("Wybierz przynajmniej jedno miejsce"):t(A())},children:"Wybierz miejsca"})})]})})]})})},ae=t(60),ce=Object(C.b)("div")(o||(o=Object(v.a)(["\n  width: 100%;\n  height: 100%;\n  border-radius: 1px;\n  box-shadow: 0px 0px 0px 1px rgba(0, 0, 0, 1);\n  background-color: white;\n  transition: background 0.25s ease;\n  pointer-events: all;\n  ",";\n"])),(function(e){var n=e.seat;return n.reserved?Object(C.a)(d||(d=Object(v.a)(["\n        background: gray;\n      "]))):n.selected?Object(C.a)(l||(l=Object(v.a)(["\n        background: orange;\n        box-shadow: 0px 0px 0px 1px orange;\n      "]))):void 0})),ie=function(e){var n=e.seat,t=e.onMouseDown,r=e.onHover;return Object(Y.jsx)(ce,{seat:n,onMouseEnter:function(){r&&r()},onMouseDown:function(){t&&t()}})},se=Object(C.b)("div")(j||(j=Object(v.a)(["\n  display: grid;\n  grid-template-columns: ",";\n  grid-template-rows: ",";\n  grid-column-gap: ",";\n  grid-row-gap: ",";\n"])),(function(e){var n=e.nCols;return"repeat(".concat(n,", 1fr)")}),(function(e){var n=e.nRows;return"repeat(".concat(n,", 1fr)")}),(function(e){var n=e.gap;return"".concat(n,"px")}),(function(e){var n=e.gap;return"".concat(n,"px")})),oe=Object(C.b)("div")(b||(b=Object(v.a)(["\n  width: 50px;\n  height: 50px;\n  grid-column: ",";\n  grid-row: ",";\n"])),(function(e){return e.y}),(function(e){return e.x})),de=Object(C.b)("div")(u||(u=Object(v.a)(["\n  pointer-events: all;\n  text-align: center;\n  font-weight: bold;\n  color: gray;\n  cursor: default;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  box-shadow: 0px 0px 3px 1px gray;\n"]))),le=C.b.div(p||(p=Object(v.a)(["\n  width: 100%;\n  position: absolute;\n  display: flex;\n  padding: 5px;\n  pointer-events: none;\n\n  #tutorial-icon:hover + #tutorial {\n    display: inline-block;\n    opacity: 1;\n  }\n"]))),je=C.b.div(x||(x=Object(v.a)(["\n  display: none;\n  transition: opacity 0.15s ease;\n  margin-left: 5px;\n  width: 100%;\n  background: #53ca7b;\n  opacity: 0;\n  text-align: center;\n  pointer-events: None;\n  border-radius: 5px;\n"])));var be,ue,pe,xe,fe,he,Oe,ge,ve,me,ye,Se,we,ke,ze,Ce=function(){var e=Object(f.useState)(!1),n=Object(ae.a)(e,2),t=n[0],r=n[1],a=y(),c=S(q),i=S(V),s=Object(f.useMemo)((function(){return function(e){var n,t=0,r=0,a=Object(E.a)(e);try{for(a.s();!(n=a.n()).done;){var c=n.value;c.cords.x>t&&(t=c.cords.x),c.cords.y>r&&(r=c.cords.y)}}catch(i){a.e(i)}finally{a.f()}return{rows:t,cols:r}}(c)}),[c]);return c.length?Object(Y.jsxs)("div",{onDragStart:function(e){return e.preventDefault()},onMouseDown:function(){return r(!0)},onMouseUp:function(){return r(!1)},onMouseLeave:function(){return r(!1)},children:[Object(Y.jsxs)(le,{children:[Object(Y.jsx)(de,{id:"tutorial-icon",children:" ? "}),Object(Y.jsx)(je,{id:"tutorial",children:"Kliknij aby wybra\u0107 miejsce, kliknij i przeci\u0105g aby zaznaczy\u0107 wiele na raz."})]}),Object(Y.jsx)(se,{nRows:s.rows,nCols:s.cols,gap:10,children:c.map((function(e,n){return Object(Y.jsx)(oe,{x:e.cords.x+1,y:e.cords.y+1,children:Object(Y.jsx)(ie,{seat:e,onHover:function(){!t||e.reserved||i||a(J([e.id]))},onMouseDown:function(){a(J([e.id]))}},n)},"slot"+n)}))})]}):Object(Y.jsx)("div",{children:"No seats found!"})},Ne=[{name:"Wolne miejsce",reserved:!1,selected:!1},{name:"Wybrane miejsce",reserved:!1,selected:!0},{name:"Zaj\u0119te miejsce",reserved:!0,selected:!1}],Ee=C.b.div(be||(be=Object(v.a)(["\n  display: flex;\n"]))),Me=C.b.div(ue||(ue=Object(v.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 30%;\n"]))),We=C.b.div(pe||(pe=Object(v.a)(["\n  width: 25px;\n  height: 25px;\n"]))),De=C.b.div(xe||(xe=Object(v.a)(["\n  padding-left: 20px;\n"]))),Re=function(){return Object(Y.jsx)(Ee,{children:Ne.map((function(e,n){return Object(Y.jsxs)(Me,{children:[Object(Y.jsx)(We,{children:Object(Y.jsx)(ie,{seat:e},n)}),Object(Y.jsx)(De,{children:e.name})]})}))})},Ae=C.b.div(fe||(fe=Object(v.a)(["\n  position: absolute;\n  top: 50%;\n  right: 50%;\n  transform: translate(50%, -50%);\n  padding: 10px;\n  border-radius: 5px;\n  box-shadow: 0px 0px 8px 1px rgba(0, 0, 0, 0.2);\n"]))),Be=C.b.div(he||(he=Object(v.a)(["\n  display: flex;\n  align-items: center;\n"]))),Le=C.b.div(Oe||(Oe=Object(v.a)(["\n  margin-top: 20px;\n"]))),He=C.b.div(ge||(ge=Object(v.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n"]))),Je=C.b.hr(ve||(ve=Object(v.a)(["\n  margin-top: 20px;\n  margin-bottom: 20px;\n  width: 80%;\n  border: none;\n  border-top: 1px solid gray;\n"]))),Pe=Object(C.b)("span")(me||(me=Object(v.a)(["\n  margin-left: 10px;\n  padding: 0px 5px 0px 5px;\n  border-radius: 3px;\n  background: gray;\n  color: white;\n  font-weight: bold;\n  ","\n  ","\n"])),(function(e){var n=e.selected,t=e.target;return n>0&&n<t&&Object(C.a)(ye||(ye=Object(v.a)(["\n      background: orange;\n    "])))}),(function(e){var n=e.selected,t=e.target;return n>0&&n===t&&Object(C.a)(Se||(Se=Object(v.a)(["\n      background: #36ca4a;\n    "])))})),Ze=function(){var e=y(),n=S(F),t=S(Q);return Object(f.useEffect)((function(){e(K())}),[e]),Object(Y.jsxs)(Ae,{children:[Object(Y.jsx)(Ce,{}),Object(Y.jsx)(Le,{children:Object(Y.jsx)(Re,{})}),Object(Y.jsx)(Je,{}),Object(Y.jsxs)(He,{children:[Object(Y.jsx)(z.a,{onClick:function(){e(I())},children:"Powr\xf3t"}),Object(Y.jsxs)(Be,{children:["Wybrano miejsca:"," ",Object(Y.jsx)(Pe,{selected:n.length,target:t,children:"".concat(n.length,"/").concat(t)})]}),Object(Y.jsx)(z.a,{type:"primary",onClick:function(){n.length===t?e(Z()):alert("Wybierz ".concat(t," miejsca zanim zatwierdzisz wyb\xf3r."))},children:"Zatwierd\u017a miejsca"})]})]})},Ie=Object(C.b)("p")(we||(we=Object(v.a)(["\n  ","\n"])),(function(e){return e.bold&&Object(C.a)(ke||(ke=Object(v.a)(["\n      font-weight: bold;\n    "])))})),Ke=C.b.div(ze||(ze=Object(v.a)(["\n  position: fixed;\n  top: 50%;\n  right: 50%;\n  transform: translate(50%, -50%);\n  border-radius: 5px;\n  background: white;\n  padding: 20px;\n  width: 600px;\n  .field:not(:first-child) {\n    margin-top: 20px;\n  }\n\n  box-shadow: 0px 0px 8px 1px rgba(0, 0, 0, 0.2);\n"]))),Te=function(){var e=S(F);return Object(Y.jsxs)(Ke,{children:[Object(Y.jsx)(Ie,{bold:!0,children:"Twoja rezerwacja przebieg\u0142a pomy\u015blnie!"}),Object(Y.jsxs)(Ie,{children:["Wybra\u0142e\u015b miejsca:",e.map((function(e){return Object(Y.jsx)("div",{children:"- rz\u0105d x".concat(e.cords.x+1,", miejsce y").concat(e.cords.y+1," (").concat(e.id,")")})}))]}),Object(Y.jsx)(Ie,{bold:!0,children:"Dzi\u0119kujemy! W razie problem\xf3w prosimy o kontakt z dzia\u0142em administracji"})]})},Ue=function(){switch(S(G)){default:case 0:return Object(Y.jsx)(re,{});case 1:return Object(Y.jsx)(Ze,{});case 2:return Object(Y.jsx)(Te,{})}},qe=Object(R.a)({reducer:{reservation:X}});g.a.render(Object(Y.jsx)(h.a.StrictMode,{children:Object(Y.jsx)(m.a,{store:qe,children:Object(Y.jsx)(Ue,{})})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.3e5e06a4.chunk.js.map